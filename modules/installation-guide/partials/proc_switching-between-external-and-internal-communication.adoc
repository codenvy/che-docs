
[id="switching-between-external-and-internal-communication_{context}"]
= Switching between external and internal ways in inter-component communication

The communication between {prod} components uses the internal {orch-name} DNS names.
In following situations, instead, use external {platforms-ingress} in inter-component communications:

* Multi-cluster OpenShift environment.
* The {orch-name} NetworkPolicies are restricting communication between namespaces.

.Prerequisites

* The `{orch-cli}` tool is available.
* An instance of {prod-short} running in {orch-name}.


.Procedure

. To use external {platforms-ingress} in inter-component communications:
+
[subs="+quotes,+attributes"]
----
$ {orch-cli} patch checluster {prod-checluster} -n {prod-namespace} --type=json -p \
'[{"op": "replace", "path": "/spec/server/useInternalClusterSVCNames", "value": false}]'
----

. To use internal {orch-name} DNS names in inter-component communications:
+
[subs="+quotes,+attributes"]
----
$ {orch-cli} patch checluster {prod-checluster} -n {prod-namespace} --type=json -p \
'[{"op": "replace", "path": "/spec/server/useInternalClusterSVCNames", "value": true}]'
----
