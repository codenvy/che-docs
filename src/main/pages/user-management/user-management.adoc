---
title: "User Management"
keywords: organizations, user management, permissions
tags: [ldap, keycloak]
sidebar: user_sidebar
permalink: user-management.html
folder: user-management
---


[id="auth-and-user-management"]
== Authorization and user management

Eclipse Che uses http://www.Keycloak.org[Keycloak] to create, import, manage, delete and authenticate users.  Keycloak uses built in authentication mechanisms and user storage.  It can use a third party identity management systems to create and authenticate users. Eclipse Che requires a Keycloak token when you request access to Che resources.

Local users and imported federation users must have an email address in their profile.

The default Keycloak credentials are `admin:admin`. You can use `admin:admin` credentials when logging into Che for the first time. It has system privileges. 

If Che is deployed on Openshift, to find your Keycloak URL:

* OpenShift web console > keycloak namespace 

If Che is running on Docker, to find your Keycloak URL:
 
* Go to `$CHE_HOST:5050/auth`   

[id="che-and-keycloak"]
== Che and Keycloak

The deployment script ensures that Keycloak is properly configured when Che is deployed on OpenShift or installed on Docker. The `che-public` client is created after deployment and the following fields are populated:

* *Valid Redirect URIs*: You use this URL to access Che. 
* *Web Origins*:

Some common errors: 

*Invalid `redirectURI` error*:  occurs when you access Che at `myhost` which is an alias and your 
original `CHE_HOST` is `1.1.1.1`.  If this error occurs, go to Keycloak administration console and check valid Redirect URIs.

*CORS error*: occurs when you have an invalid web origin

[id="keycloak-tokens"]
== Configuring Keycloak tokens

A user token expires after 30 minutes by default. 

You can change the following Keycloak token settings:

image::keycloak/keycloak_realm.png[]

[id="user-federation"]
== User federation

Keycloak federates external user databases and supports LDAP and Active Directory. You can test the connection and authenticate users before choosing a storage provider.


Additional Resources:

* To learn how to add a provider, see http://www.keycloak.org/docs/3.2/server_admin/topics/user-federation.html[user storage federation].

* To specify multiple LDAP servers, see http://www.keycloak.org/docs/3.2/server_admin/topics/user-federation/ldap.html[LDAP and Active Directory].

[id="social-login-and-brokering"]
== Social login and brokering

Keycloak provides built-in support for most common social networks such as GitHub, Facebook, Twitter, OpenShift. See Instructions to http://www.keycloak.org/docs/3.2/server_admin/topics/identity-broker/social/github.html[enable Login with GitHub].

You can also enable ssh key upload to Che users’ GitHub accounts. 

To enable this feature when you register a GitHub identity provider: 

. Set scope to `repo,user,write:public_key`.

. Set store tokens and stored tokens readable to *ON*.

image::git/kc_provider.png[]

. Add a default read-token role

image::git/kc_roles.png[]

This is default `delegated` OAuth service mode for Multi-User Che, which is configured with property `che.oauth.service_mode`.

Setting it to `embedded` will make it use Che’s OAuth Authenticator, for which link:version-control.html#github-oauth[Instructions for Single User mode] will apply.

Read more about link:ide_projects.html#project-import-and-ssh-connection[SHH key management].

[id="protocol-based-providers"]
== Protocol based providers

Keycloak supports http://www.Keycloak.org/docs/3.2/server_admin/topics/identity-broker/saml.html[SAML v2.0] and http://www.Keycloak.org/docs/3.2/server_admin/topics/identity-broker/oidc.html[OpenID Connect v1.0] protocols. You can connect your identity provider systems if they support these protocols.

[id="managing-users"]
== Managing users 

You can add, delete, and edit users in the user interface. See: http://www.Keycloak.org/docs/3.2/server_admin/topics/users.html[Keycloak User Management] for more information.

[id="smtp-configurationemail-notifications"]
== Configuring SMTP and email notifications

Eclipse Che does not provide any pre-configured MTP servers. You enable SMTP servers in Keycloak. `che realm settings > Email`. You specify the host, port, username, and password. Eclipse Che uses the default theme for email templates for registration, email confirmation, password recovery, and failed login.
